# 3-stage-pipelined-cpu

## Test Bench

### Program (Instructions Test Vectors File)
1) NOP
INTERESTING

Assembly
> ADDI X0, X2, 0x5763
> ADDI X0, X2, 0x5508
> NOP

> 00000010001011111010011011000111
> EXPECTED data_out: `0000`
> EXPECTED addr: `a6c7`
> EXPECTED we: `0`
> EXPECTED out_reg: `0000`
> EXPECTED zero: `1`
> EXPECTED carry: `0`

10110000000000100101011101100011
10110000000000100101010100001000
00000010001011111010011011000111

2) STORE X8(16'h6050), 0x1139

Assembly
> ADDI X0, X8, 0x6050 
> ADDI X0, X1, 0x5045
> STORE X8, 0x1139

> 00011000000100000001000100111001
> EXPECTED data_out: `6050`
> EXPECTED addr: `1139`
> EXPECTED we: `1`
> EXPECTED out_reg: `0000`
> EXPECTED zero: `1`
> EXPECTED carry: `0`

10110000000010000110000001010000
10110000000000010101000001000101
00011000000100000001000100111001

3) LOAD X15, 0x915a
> LOAD X15, 0x1139

Assembly
> ADDI X0, X15, 0xc9a5
> ADDI X0, X11, 0x58b1
> LOAD X15, 0x1139

> 00101111000000110001000100111001
> EXPECTED data_out: `6050`
> EXPECTED addr: `1139`
> EXPECTED we: `0`
> EXPECTED out_reg: `0000`
> EXPECTED zero: `1`
> EXPECTED carry: `0`

10110000000011111100100110100101
10110000000010110101100010110001
00101111000000110001000100111001

4) ADDC X13(16'he537), X6(16'hcf40), X4

Assembly
> ADDI X0, X13, 0xe537 
> ADDI X0, X6, 0xcf40
> ADDC X13, X6, X4

> 00111101011001001010110100011111
> EXPECTED data_out: `e537`
> EXPECTED addr: `ad1f`
> EXPECTED we: `0`
> EXPECTED out_reg: `b477`
> EXPECTED zero: `0`
> EXPECTED carry: `1`

10110000000011011110010100110111
10110000000001101100111101000000
00111101011001001010110100011111

5) SUBC X14(16'hfb97), X10(16'ha7ea), X11

Assembly
> ADDI X0, X14, 0xfb97
> ADDI X0, X10, 0xa7ea
> SUBC X14, X10, X11

> 01001110101010110010110001110000
> EXPECTED data_out: `fb97`
> EXPECTED addr: `2c70`
> EXPECTED we: `0`
> EXPECTED out_reg: `53ad`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011101111101110010111
10110000000010101010011111101010
01001110101010110010110001110000

6) AND X4(16'h76ed), X12(16'hb43c), X13

Assembly
> ADDI X0, X4, 0x76ed
> ADDI X0, X12, 0xb43c
> AND X4, X12, X13

> 01010100110011011100001101011110
> EXPECTED data_out: `76ed`
> EXPECTED addr: `c35e`
> EXPECTED we: `0`
> EXPECTED out_reg: `342c`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000001000111011011101101
10110000000011001011010000111100
01010100110011011100001101011110

7) OR X10(16'h00af), X7(16'hba92), X5

Assembly
> ADDI X0, X10, 0x00af
> ADDI X0, X7, 0xba92
> OR X10, X7, X5

> 01101010011101011110000100010000
> EXPECTED data_out: `00af`
> EXPECTED addr: `e110`
> EXPECTED we: `0`
> EXPECTED out_reg: `babf`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000010100000000010101111
10110000000001111011101010010010
01101010011101011110000100010000

8) XOR X13(16'hc991), X15(16'ha114), X3

Assembly
> ADDI X0, X13, 0xc991
> ADDI X0, X15, 0xa114
> XOR X13, X15, X3

> 01111101111100110011001110011011
> EXPECTED data_out: `c991`
> EXPECTED addr: `339b`
> EXPECTED we: `0`
> EXPECTED out_reg: `6885`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011011100100110010001
10110000000011111010000100010100
01111101111100110011001110011011


9) SHL X4(16'h08c7), X10(16'hb29c), X14
> SHL X4(16'h08c7), X10(16'h000c), X14

Assembly
> ADDI X0, X4, 0x08c7 
> ADDI X0, X10, 0x000c
> SHL X4, X10, X14

> 10000100101011101000110100001100
> EXPECTED data_out: `08c7`
> EXPECTED addr: `8d0c`
> EXPECTED we: `0`
> EXPECTED out_reg: `7000`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000001000000100011000111
10110000000010100000000000001100
10000100101011101000110100001100

10) SHR X15(16'hff00), X5(16'h5555), X10
> SHR X15(16'h7700), X5(16'h0005), X10

Assembly
> ADDI X0, X15, 0xff00
> ADDI X0, X5, 0x0005
> SHR X15, X5, X10

> 10011111010110101010101010101010
> EXPECTED data_out: `ff00`
> EXPECTED addr: `aaaa`
> EXPECTED we: `0`
> EXPECTED out_reg: `07f8`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011111111111100000000
10110000000001010000000000000101
10011111010110101010101010101010


11) SHRA X12(16'hdbd5), X3(16'h3333), X13
> SHRA X12(16'hdbd5), X3(16'h0003), X13

Assembly
> ADDI X0, X12, 0xdbd5
> ADDI X0, X3, 0x0003
> SHRA X12, X3, X13

> 10101100001111010110110110011010
> EXPECTED data_out: `dbd5`
> EXPECTED addr: `6d9a`
> EXPECTED we: `0`
> EXPECTED out_reg: `fb7a`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011001101101111010101
10110000000000110000000000000011
10101100001111010110110110011010


12) ADDI X2(16'h4001), X6, 0x2000

Assembly
> ADDI X0, X2, 0x4001
> ADDI X0, X14, 0xffff
> ADDI X2, X6, 0x2000

> 10110010111001100010000000000000
> EXPECTED data_out: `4001`
> EXPECTED addr: `2000`
> EXPECTED we: `0`
> EXPECTED out_reg: `6001`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000000100100000000000001
10110000000011101111111111111111
10110010111001100010000000000000


13) SUBI X14(16'hf0f0), X7, 0x9140

Assembly
> ADDI X0, X14, 0xf0f0
> ADDI X0, X4, 0x4f4f
> SUBI X14, X7, 0x9140

> 11001110010001111001000101000000
> EXPECTED data_out: `f0f0`
> EXPECTED addr: `9120`
> EXPECTED we: `0`
> EXPECTED out_reg: `5fb0`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011101111000011110000
10110000000001000100111101001111
11001110010001111001000101000000

14) ANDI X7(16'h7777), X10, 0x4444

Assembly
> ADDI X0, X7, 0x7777
> ADDI X0, X9, 0x9999
> ANDI X7, X10, 0x4444

> 11010111100110100100010001000100
> EXPECTED data_out: `7777`
> EXPECTED addr: `4444`
> EXPECTED we: `0`
> EXPECTED out_reg: `4444`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000001110111011101110111
10110000000010011001100110011001
11010111100110100100010001000100

15) ORI X11(16'hbbbb), X13, 0xdddd

Assembly
> ADDI X0, X11, 0xbbbb
> ADDI X0, X6, 0x6666
> ORI X11, X13, 0xdddd

> 11101011011011011101110111011101
> EXPECTED data_out: `bbbb`
> EXPECTED addr: `dddd`
> EXPECTED we: `0`
> EXPECTED out_reg: `ffff`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000010111011101110111011
10110000000001100110011001100110
11101011011011011101110111011101


16) XORI X12(16'hcccc), X14, 0xeeee

Assembly
> ADDI X0, X12, 0xcccc
> ADDI X0, X8, 0x4444
> XORI X12, X14, 0xeeee

> 11111100100011101110111011101110
> EXPECTED data_out: `cccc`
> EXPECTED addr: `eeee`
> EXPECTED we: `0`
> EXPECTED out_reg: `2222`
> EXPECTED zero: `0`
> EXPECTED carry: `0`

10110000000011001100110011001100
10110000000010001000100010001000
11111100100011101110111011101110



**`instuctions_program.tv`**
```bin
10110000000000100101011101100011
10110000000000100101010100001000
00000010001011111010011011000111
10110000000010000110000001010000
10110000000000010101000001000101
00011000000100000001000100111001
10110000000011111100100110100101
10110000000010110101100010110001
00101111000000110001000100111001
10110000000011011110010100110111
10110000000001101100111101000000
00111101011001001010110100011111
10110000000011101111101110010111
10110000000010101010011111101010
01001110101010110010110001110000
10110000000001000111011011101101
10110000000011001011010000111100
01010100110011011100001101011110
10110000000010100000000010101111
10110000000001111011101010010010
01101010011101011110000100010000
10110000000011011100100110010001
10110000000011111010000100010100
01111101111100110011001110011011
10110000000001000000100011000111
10110000000010100000000000001100
10000100101011101000110100001100
10110000000011111111111100000000
10110000000001010000000000000101
10011111010110101010101010101010
10110000000011001101101111010101
10110000000000110000000000000011
10101100001111010110110110011010
10110000000000100100000000000001
10110000000011101111111111111111
10110010111001100010000000000000
10110000000011101111000011110000
10110000000001000100111101001111
11001110010001111001000101000000
10110000000001110111011101110111
10110000000010011001100110011001
11010111100110100100010001000100
10110000000010111011101110111011
10110000000001100110011001100110
11101011011011011101110111011101
10110000000011001100110011001100
10110000000010001000100010001000
11111100100011101110111011101110
```
